# SaaS data source definitions  
name: saas_datasources
description: Data source schemas for SaaS business analytics

datasources:
  subscriptions:
    type: table
    table: subscriptions
    database: saas_analytics
    schema: core
    description: Customer subscription records
    columns:
      - name: id
        type: number
        description: Unique subscription identifier
      - name: user_id
        type: number
        description: Reference to user account
      - name: company_id
        type: number
        description: Reference to company
      - name: plan_type
        type: string
        description: Subscription plan (Starter, Pro, Enterprise)
      - name: status
        type: string
        description: Subscription status (active, cancelled, suspended)
      - name: monthly_value
        type: currency
        description: Monthly recurring revenue value
      - name: billing_frequency
        type: string
        description: Billing frequency (monthly, annually)
      - name: start_date
        type: date
        description: Subscription start date
      - name: end_date
        type: date
        description: Subscription end date (if cancelled)
      - name: previous_plan
        type: string
        description: Previous plan type (for upgrades/downgrades)

  users:
    type: table
    table: users
    database: saas_analytics
    schema: core
    description: User account information
    columns:
      - name: id
        type: number
        description: Unique user identifier
      - name: email
        type: string
        description: User email address
      - name: role
        type: string
        description: User role (admin, user, viewer)
      - name: signup_source
        type: string
        description: How user discovered the product
      - name: status
        type: string
        description: User account status (active, inactive, suspended)
      - name: created_at
        type: date
        description: Account creation timestamp

  usage_events:
    type: table
    table: usage_events
    database: saas_analytics
    schema: core
    description: Product usage tracking events
    columns:
      - name: id
        type: number
        description: Unique event identifier
      - name: user_id
        type: number
        description: Reference to user
      - name: event_date
        type: date
        description: Date of usage event
      - name: feature_name
        type: string
        description: Product feature being used
      - name: session_duration_minutes
        type: number
        description: Length of user session in minutes
      - name: daily_sessions
        type: number
        description: Number of sessions in the day

  invoices:
    type: table
    table: invoices
    database: saas_analytics
    schema: billing
    description: Billing and invoice records
    columns:
      - name: id
        type: number
        description: Unique invoice identifier
      - name: subscription_id
        type: number
        description: Reference to subscription
      - name: amount
        type: currency
        description: Invoice amount
      - name: status
        type: string
        description: Invoice status (paid, pending, failed)
      - name: invoice_date
        type: date
        description: Invoice generation date
      - name: due_date
        type: date
        description: Payment due date

  companies:
    type: table
    table: companies
    database: saas_analytics
    schema: core
    description: Company/organization information
    columns:
      - name: id
        type: number
        description: Unique company identifier
      - name: name
        type: string
        description: Company name
      - name: industry
        type: string
        description: Company industry vertical
      - name: region
        type: string
        description: Geographic region
      - name: employee_count
        type: number
        description: Number of employees
      - name: acquisition_cost
        type: currency
        description: Customer acquisition cost

  # Example of streaming data source
  real_time_events:
    type: stream
    source: kafka
    topic: user_events
    schema: |
      {
        "user_id": "number",
        "event_type": "string", 
        "timestamp": "timestamp",
        "properties": "json"
      }
    description: Real-time user event stream
    
  # Example of external API data source
  market_data:
    type: api
    endpoint: "https://api.marketdata.com/v1/industry"
    authentication: bearer_token
    refresh_schedule: hourly
    description: External market and industry data